
# TODO: run ruby unit tests by pattern function

rt() {
	echo "not implemented yet..." && return 1
	local orig_dir=$(pwd)
	p || { cd $orig_dir; return 1; } # Up to the top-level project dir
	[[ -d test ]] || return 2;

	cd test
	ack -g "$1"

	cd $orig_dir
}

# Checkout last git branch, as grepped out of the reflog
glb() {
  local last_branch=$(git reflog | grep checkout | head -1 | ruby -e 'STDIN.read =~ /from ([\w\d_\-]*)/; puts $1')
  [[ -z "$last_branch" ]] && return 1
  echo "Checking out last branch: $last_branch"
  git co $last_branch
}

sbdeploy() {
  if [[ $# -ne 1 ]]; then
    echo "Usage: sbdeploy SANDBOX"
    false
  else
    be cap sandbox deploy:hot SANDBOX_DOMAIN="$@"
  fi
}
